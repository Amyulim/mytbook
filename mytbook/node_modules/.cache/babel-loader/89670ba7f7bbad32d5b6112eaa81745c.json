{"remainingRequest":"/Users/eveyensecondsobremisana/Desktop/mytbook/mytbook/node_modules/babel-loader/lib/index.js!/Users/eveyensecondsobremisana/Desktop/mytbook/mytbook/node_modules/cache-loader/dist/cjs.js??ref--0-0!/Users/eveyensecondsobremisana/Desktop/mytbook/mytbook/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/eveyensecondsobremisana/Desktop/mytbook/mytbook/src/components/Booklist.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/eveyensecondsobremisana/Desktop/mytbook/mytbook/src/components/Booklist.vue","mtime":1551078636321},{"path":"/Users/eveyensecondsobremisana/Desktop/mytbook/mytbook/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/eveyensecondsobremisana/Desktop/mytbook/mytbook/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/Users/eveyensecondsobremisana/Desktop/mytbook/mytbook/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/eveyensecondsobremisana/Desktop/mytbook/mytbook/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":["import \"core-js/modules/es6.regexp.search\";\nimport \"core-js/modules/es7.array.includes\";\nimport \"core-js/modules/es6.string.includes\";\nimport \"regenerator-runtime/runtime\";\nimport _asyncToGenerator from \"/Users/eveyensecondsobremisana/Desktop/mytbook/mytbook/node_modules/@babel/runtime-corejs2/helpers/esm/asyncToGenerator\";\nimport \"core-js/modules/es6.array.iterator\";\nimport \"core-js/modules/es6.promise\";\nimport \"core-js/modules/es7.promise.finally\";\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\nimport io from 'socket-io-client';\nexport default {\n  name: \"booklist\",\n  data: function data() {\n    return {\n      result: \"\",\n      book_title: \"\",\n      detail: false,\n      curItem: \"\",\n      search: '',\n      componentLoaded: false,\n      socket: io(\"https://mytbook.herokuapp.com/\"),\n      msg: \"\"\n    };\n  },\n  methods: {\n    See_detail: function See_detail(item) {\n      this.detail = true;\n      this.curItem = item;\n      console.log(\"curItem:\", this.curItem);\n    },\n    Change_modal: function Change_modal() {\n      this.detail = false;\n    },\n    GoBookUpdate: function GoBookUpdate() {\n      this.store.cur_book_id = this.curItem.book_id;\n      this.store.cur_book_title = this.curItem.book_title;\n      this.store.cur_book_isbn = this.curItem.book_isbn;\n      this.store.cur_book_course = this.curItem.book_course;\n      this.store.cur_book_price = this.curItem.book_price;\n      this.store.cur_book_img = this.curItem.book_img;\n      this.store.cur_book_mdate = this.curItem.book_mdate;\n      this.store.cur_book_desc = this.curItem.book_desc;\n      this.store.cur_book_condition = this.curItem.book_condition;\n      this.store.cur_book_status = this.curItem.book_status; //        console.log(this.store.cur_book_desc);\n\n      this.$router.push('bookupdate');\n    },\n    DeleteBook: function () {\n      var _DeleteBook = _asyncToGenerator(\n      /*#__PURE__*/\n      regeneratorRuntime.mark(function _callee() {\n        var fd, resp, json;\n        return regeneratorRuntime.wrap(function _callee$(_context) {\n          while (1) {\n            switch (_context.prev = _context.next) {\n              case 0:\n                alert(\"deleted!\");\n                fd = new FormData();\n                fd.append(\"user_id\", this.store.user_id);\n                fd.append(\"book_id\", this.curItem.book_id);\n                console.log(this.user_id);\n                console.log(this.curItem.book_id);\n                _context.next = 8;\n                return fetch(\"https://mytbook.herokuapp.com/delete_book.php\", {\n                  method: \"POST\",\n                  body: fd\n                });\n\n              case 8:\n                resp = _context.sent;\n                _context.next = 11;\n                return resp.text();\n\n              case 11:\n                json = _context.sent;\n                this.detail = false; //referesh\n\n                _context.next = 15;\n                return fetch(\"https://mytbook.herokuapp.com/select_book.php\");\n\n              case 15:\n                resp = _context.sent;\n                _context.next = 18;\n                return resp.json();\n\n              case 18:\n                json = _context.sent;\n                this.result = json;\n\n              case 20:\n              case \"end\":\n                return _context.stop();\n            }\n          }\n        }, _callee, this);\n      }));\n\n      function DeleteBook() {\n        return _DeleteBook.apply(this, arguments);\n      }\n\n      return DeleteBook;\n    }(),\n    GoMessage: function GoMessage() {\n      this.socket.emit(\"message\", this.msg);\n    }\n  },\n  beforeCreate: function () {\n    var _beforeCreate = _asyncToGenerator(\n    /*#__PURE__*/\n    regeneratorRuntime.mark(function _callee2() {\n      var resp, json;\n      return regeneratorRuntime.wrap(function _callee2$(_context2) {\n        while (1) {\n          switch (_context2.prev = _context2.next) {\n            case 0:\n              _context2.next = 2;\n              return fetch(\"https://mytbook.herokuapp.com/select_book.php\");\n\n            case 2:\n              resp = _context2.sent;\n              _context2.next = 5;\n              return resp.json();\n\n            case 5:\n              json = _context2.sent;\n              //          json.JSON.parse(json);\n              //          JSON.parse();\n              console.log(json);\n              this.result = json; //          console.log(\"result\",this.result);\n              //          console.log(\"title\",this.result[0].book_title);\n\n              this.componentLoaded = true;\n\n            case 9:\n            case \"end\":\n              return _context2.stop();\n          }\n        }\n      }, _callee2, this);\n    }));\n\n    function beforeCreate() {\n      return _beforeCreate.apply(this, arguments);\n    }\n\n    return beforeCreate;\n  }(),\n  computed: {\n    filteredList: function filteredList() {\n      var _this = this;\n\n      if (!this.componentLoaded) return null;\n      return this.result.filter(function (item) {\n        return item.book_title.toLowerCase().includes(_this.search.toLowerCase());\n      });\n    }\n  },\n  mounted: function mounted() {\n    this.socket.io(\"user_connected\", function (data) {\n      alert(\"sent a msg\");\n    });\n  }\n};",{"version":3,"sources":["Booklist.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAoHA,OAAA,EAAA,MAAA,kBAAA;AAGA,eAAA;AACA,EAAA,IAAA,EAAA,UADA;AAEA,EAAA,IAFA,kBAEA;AACA,WAAA;AACA,MAAA,MAAA,EAAA,EADA;AAEA,MAAA,UAAA,EAAA,EAFA;AAGA,MAAA,MAAA,EAAA,KAHA;AAIA,MAAA,OAAA,EAAA,EAJA;AAKA,MAAA,MAAA,EAAA,EALA;AAMA,MAAA,eAAA,EAAA,KANA;AAOA,MAAA,MAAA,EAAA,EAAA,CAAA,gCAAA,CAPA;AAQA,MAAA,GAAA,EAAA;AARA,KAAA;AAUA,GAbA;AAcA,EAAA,OAAA,EAAA;AACA,IAAA,UAAA,EAAA,oBAAA,IAAA,EAAA;AAEA,WAAA,MAAA,GAAA,IAAA;AAEA,WAAA,OAAA,GAAA,IAAA;AACA,MAAA,OAAA,CAAA,GAAA,CAAA,UAAA,EAAA,KAAA,OAAA;AAEA,KARA;AASA,IAAA,YAAA,EAAA,wBAAA;AACA,WAAA,MAAA,GAAA,KAAA;AACA,KAXA;AAYA,IAAA,YAAA,EAAA,wBAAA;AACA,WAAA,KAAA,CAAA,WAAA,GAAA,KAAA,OAAA,CAAA,OAAA;AACA,WAAA,KAAA,CAAA,cAAA,GAAA,KAAA,OAAA,CAAA,UAAA;AACA,WAAA,KAAA,CAAA,aAAA,GAAA,KAAA,OAAA,CAAA,SAAA;AACA,WAAA,KAAA,CAAA,eAAA,GAAA,KAAA,OAAA,CAAA,WAAA;AACA,WAAA,KAAA,CAAA,cAAA,GAAA,KAAA,OAAA,CAAA,UAAA;AACA,WAAA,KAAA,CAAA,YAAA,GAAA,KAAA,OAAA,CAAA,QAAA;AACA,WAAA,KAAA,CAAA,cAAA,GAAA,KAAA,OAAA,CAAA,UAAA;AACA,WAAA,KAAA,CAAA,aAAA,GAAA,KAAA,OAAA,CAAA,SAAA;AACA,WAAA,KAAA,CAAA,kBAAA,GAAA,KAAA,OAAA,CAAA,cAAA;AACA,WAAA,KAAA,CAAA,eAAA,GAAA,KAAA,OAAA,CAAA,WAAA,CAVA,CAWA;;AACA,WAAA,OAAA,CAAA,IAAA,CAAA,YAAA;AACA,KAzBA;AA0BA,IAAA,UAAA;AAAA;AAAA;AAAA,8BAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAEA,gBAAA,KAAA,CAAA,UAAA,CAAA;AAEA,gBAAA,EAJA,GAIA,IAAA,QAAA,EAJA;AAMA,gBAAA,EAAA,CAAA,MAAA,CAAA,SAAA,EAAA,KAAA,KAAA,CAAA,OAAA;AACA,gBAAA,EAAA,CAAA,MAAA,CAAA,SAAA,EAAA,KAAA,OAAA,CAAA,OAAA;AAEA,gBAAA,OAAA,CAAA,GAAA,CAAA,KAAA,OAAA;AACA,gBAAA,OAAA,CAAA,GAAA,CAAA,KAAA,OAAA,CAAA,OAAA;AAVA;AAAA,uBAYA,KAAA,CAAA,+CAAA,EAAA;AACA,kBAAA,MAAA,EAAA,MADA;AAEA,kBAAA,IAAA,EAAA;AAFA,iBAAA,CAZA;;AAAA;AAYA,gBAAA,IAZA;AAAA;AAAA,uBAiBA,IAAA,CAAA,IAAA,EAjBA;;AAAA;AAiBA,gBAAA,IAjBA;AAmBA,qBAAA,MAAA,GAAA,KAAA,CAnBA,CAqBA;;AArBA;AAAA,uBAsBA,KAAA,CAAA,+CAAA,CAtBA;;AAAA;AAsBA,gBAAA,IAtBA;AAAA;AAAA,uBAuBA,IAAA,CAAA,IAAA,EAvBA;;AAAA;AAuBA,gBAAA,IAvBA;AAwBA,qBAAA,MAAA,GAAA,IAAA;;AAxBA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OAAA;;AAAA;AAAA;AAAA;;AAAA;AAAA,OA1BA;AAoDA,IAAA,SAAA,EAAA,qBAAA;AACA,WAAA,MAAA,CAAA,IAAA,CAAA,SAAA,EAAA,KAAA,GAAA;AAEA;AAvDA,GAdA;AAyEA,EAAA,YAAA;AAAA;AAAA;AAAA,4BAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,qBACA,KAAA,CAAA,+CAAA,CADA;;AAAA;AACA,cAAA,IADA;AAAA;AAAA,qBAEA,IAAA,CAAA,IAAA,EAFA;;AAAA;AAEA,cAAA,IAFA;AAGA;AACA;AACA,cAAA,OAAA,CAAA,GAAA,CAAA,IAAA;AACA,mBAAA,MAAA,GAAA,IAAA,CANA,CAOA;AACA;;AACA,mBAAA,eAAA,GAAA,IAAA;;AATA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KAAA;;AAAA;AAAA;AAAA;;AAAA;AAAA,KAzEA;AAqFA,EAAA,QAAA,EAAA;AACA,IAAA,YADA,0BACA;AAAA;;AACA,UAAA,CAAA,KAAA,eAAA,EACA,OAAA,IAAA;AAEA,aAAA,KAAA,MAAA,CAAA,MAAA,CAAA,UAAA,IAAA,EAAA;AACA,eAAA,IAAA,CAAA,UAAA,CAAA,WAAA,GAAA,QAAA,CAAA,KAAA,CAAA,MAAA,CAAA,WAAA,EAAA,CAAA;AACA,OAFA,CAAA;AAGA;AARA,GArFA;AA+FA,EAAA,OA/FA,qBA+FA;AACA,SAAA,MAAA,CAAA,EAAA,CAAA,gBAAA,EAAA,UAAA,IAAA,EAAA;AACA,MAAA,KAAA,CAAA,YAAA,CAAA;AACA,KAFA;AAGA;AAnGA,CAAA","sourcesContent":["<template>\n  <div class=\"body\" id=\"booklist\">\n    <div class=\"container d-flex w-100 h-100 p-3 mx-auto flex-column\">\n      <main role=\"main\" class=\"inner\">\n        <section class=\"text-center\">\n          <div class=\"\">\n            <h1 class=\"jumbotron-heading\">Book lists</h1>\n            <p class=\"lead text-muted\">Find the book you want to buy!</p>\n            <div class=\"col-md-9 display-in\">\n              <input type=\"text\" v-model=\"search\" placeholder=\"Search title..\" class=\"form-control width-90\">\n            </div>\n            <div class=\"col-md-2 display-in\">\n              <input type=\"submit\" class=\"submitButton btn-primary \" value=\"Search\">\n            </div>\n          </div>\n        </section>\n        <div class=\"album py-5 \">\n          <div class=\"container\">\n\n            <div class=\"row lists\">\n              <div class=\"col-md-4\" v-for=\"item in filteredList\">\n                <div class=\"card mb-4 shadow-sm book-des\">\n                  <div class=\"book-img text-center\">\n                    <img :src= \"item.book_img\" class=\"card-img-top\" text=\"Thumbnail\" />\n                  </div>\n                  <div class=\"book-title text-center\">\n                    {{item.book_title}}<br />\n                    <span class=\"price\">${{item.book_price}}</span>\n                  </div>\n\n                  <div class=\"card-body\">\n                    <ul>\n                      <li><span class=\"list-title\">ISBN</span> : {{item.book_isbn}} </li>\n                      <li><span class=\"list-title\">Course</span> : {{item.book_course}}</li>\n                      <li><span class=\"list-title\">Meeting Time</span> : {{item.book_mdate}}</li>\n                    </ul>\n                    <div class=\"d-flex justify-content-between align-items-center\">\n                      <button @click=\"See_detail(item)\" type=\"button\" class=\"btn btn-sm btn-outline-secondary\">View</button>\n                      <div v-if=\"item.book_status === 'null'\"></div>\n                      <div v-else-if=\"item.book_status === null\"></div>\n                      <div v-else>\n                        <button type=\"button\" class=\"btn btn-sm deal-status pull-right\">{{item.book_status}}</button>\n                      </div>\n                    </div>\n                  </div>\n                  \n                </div>\n              </div>\n\n            </div>\n          </div>\n        </div>\n        <div class=\"book_detail_modal\" v-if=\"detail === true\">\n          <div class=\"row2 bookview-body position_absolute\">\n\n            <button @click=\"Change_modal\" type=\"button\" class=\"btn btn-sm btn-secondary close-button\"> &nbsp;X&nbsp;</button>\n\n            <div class=\"col-md-4 bookview-img \">\n              <div v-if=\"curItem.book_status === 'null'\"></div>\n\t\t\t\t\t\t\t\n              <div v-else-if=\"curItem.book_status === null\"></div>\n\t\t\t\t\t\t\t\n              <div v-else class=\"justify-content-between align-items-center\">\n                <button type=\"button\" class=\"btn btn-sm deal-status detail_status \">{{curItem.book_status}}</button>\n              </div>\n\n              <img src=\"../assets/book1.jpg\" class=\"detail_img\" text=\"Thumbnail\" />\n\t\t\t\t\t\t\t\n<!--\t\t\t\t\t\t\tto message the book owner TEMPORARY-->\n\t\t\t\t\t\t\t<div class=\"row\">\n                <button @click=\"GoMessage\" type=\"button\" class=\"btn btn-sm btn-primary sendmsg-button pull-left\">Send a message\n                </button>\n              </div>\n\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t\n\n              <div v-if=\"curItem.user_id===this.store.user_id\" class=\"row\">\n                <button @click=\"GoBookUpdate\" type=\"button\" class=\"btn btn-sm btn-outline-secondary myaccount-button pull-left\">Edit Book\n                </button>\n                <button @click=\"DeleteBook\" type=\"button\" class=\"btn btn-sm btn-danger pull-right myaccount-button delete-button\">Delete Book\n                </button>\n              </div>\n            </div>\n            \n            <div class=\"col-md-8 bookview-details\">\n              <p><span class=\"bookview-title\">Title: </span>{{curItem.book_title}}</p>\n              <hr>\n              <p><span class=\"bookview-title\">ISBN: </span>{{curItem.book_isbn}}</p>\n              <hr>\n              <p><span class=\"bookview-title\">Course: </span>{{curItem.book_course}}</p>\n              <hr>\n              <p><span class=\"bookview-title\">price: </span>$ {{curItem.book_price}}</p>\n              <hr>\n              <p><span class=\"bookview-title\">condition: </span>{{curItem.book_condition}}</p>\n              <hr>\n              <p><span class=\"bookview-title\">description: </span>{{curItem.book_desc}}</p>\n              <hr>\n              <p><span class=\"bookview-title\">Meeting Time: </span>{{curItem.book_mdate}}</p>\n              <hr>\n            </div>\n\n          </div>\n        </div>\n      </main>\n    </div>\n  </div>\n</template>\n<style>\n  @import \"https://stackpath.bootstrapcdn.com/bootstrap/4.2.1/css/bootstrap.min.css\";\n  @import \"../components/style.css\";\n\n\t\n\n</style>\n\n<script>\n\timport io from 'socket-io-client'\n\t\n\t\n  export default {\n    name: \"booklist\",\n    data() {\n      return {\n        result: \"\",\n        book_title: \"\",\n        detail: false,\n        curItem: \"\",\n        search: '',\n        componentLoaded: false,\n\t\t\t\tsocket:io(\"https://mytbook.herokuapp.com/\"),\n\t\t\t\tmsg:\"\",\n      }\n    },\n    methods: {\n      See_detail: function(item) {\n\n        this.detail = true;\n\n        this.curItem = item;\n        console.log(\"curItem:\", this.curItem);\n\n      },\n      Change_modal: function() {\n        this.detail = false;\n      },\n      GoBookUpdate: function() {\n        this.store.cur_book_id = this.curItem.book_id;\n        this.store.cur_book_title = this.curItem.book_title;\n        this.store.cur_book_isbn = this.curItem.book_isbn;\n        this.store.cur_book_course = this.curItem.book_course;\n        this.store.cur_book_price = this.curItem.book_price;\n        this.store.cur_book_img = this.curItem.book_img;\n        this.store.cur_book_mdate = this.curItem.book_mdate;\n        this.store.cur_book_desc = this.curItem.book_desc;\n        this.store.cur_book_condition = this.curItem.book_condition;\n        this.store.cur_book_status = this.curItem.book_status;\n        //        console.log(this.store.cur_book_desc);\n        this.$router.push('bookupdate');\n      },\n      DeleteBook: async function() {\n\n        alert(\"deleted!\")\n\n        var fd = new FormData();\n\n        fd.append(\"user_id\", this.store.user_id);\n        fd.append(\"book_id\", this.curItem.book_id);\n\n        console.log(this.user_id)\n        console.log(this.curItem.book_id)\n\n        var resp = await fetch(\"https://mytbook.herokuapp.com/delete_book.php\", {\n          method: \"POST\",\n          body: fd\n        });\n\n        var json = await resp.text();\n\n        this.detail = false;\n\n        //referesh\n        var resp = await fetch(\"https://mytbook.herokuapp.com/select_book.php\");\n        var json = await resp.json();\n        this.result = json;\n      },\n\t\t\tGoMessage: function (){\n\t\t\t\tthis.socket.emit(\"message\",this.msg);\n\t\t\t\t\n\t\t\t}\n\n\n    },\n    beforeCreate: async function() {\n      var resp = await fetch(\"https://mytbook.herokuapp.com/select_book.php\");\n      var json = await resp.json();\n      //          json.JSON.parse(json);\n      //          JSON.parse();\n      console.log(json);\n      this.result = json;\n      //          console.log(\"result\",this.result);\n      //          console.log(\"title\",this.result[0].book_title);\n      this.componentLoaded = true;\n\n    },\n    computed: {\n      filteredList() {\n        if (!this.componentLoaded)\n          return null;\n\n          return this.result.filter(item => {\n          return item.book_title.toLowerCase().includes(this.search.toLowerCase())\n        })\n      }\n    },\n\t\tmounted(){\n\t\t\tthis.socket.io(\"user_connected\", (data)=>{\n\t\t\t\talert(\"sent a msg\");\n\t\t\t})\n\t\t}\n\n  }\n\n</script>\n"],"sourceRoot":"src/components"}]}