{"remainingRequest":"/Users/eveyensecondsobremisana/Desktop/mytbook/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/eveyensecondsobremisana/Desktop/mytbook/src/components/Bookform.vue?vue&type=style&index=0&lang=css&","dependencies":[{"path":"/Users/eveyensecondsobremisana/Desktop/mytbook/src/components/Bookform.vue","mtime":1551073533811},{"path":"/Users/eveyensecondsobremisana/Desktop/mytbook/node_modules/css-loader/index.js","mtime":499162500000},{"path":"/Users/eveyensecondsobremisana/Desktop/mytbook/node_modules/vue-loader/lib/loaders/stylePostLoader.js","mtime":499162500000},{"path":"/Users/eveyensecondsobremisana/Desktop/mytbook/node_modules/postcss-loader/src/index.js","mtime":499162500000},{"path":"/Users/eveyensecondsobremisana/Desktop/mytbook/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/eveyensecondsobremisana/Desktop/mytbook/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":["\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n@import \"https://stackpath.bootstrapcdn.com/bootstrap/4.2.1/css/bootstrap.min.css\";\n@import \"../components/style.css\";\n\n",{"version":3,"sources":["Bookform.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA+GA;AACA","file":"Bookform.vue","sourceRoot":"src/components","sourcesContent":["<template>\n  <div class=\"body\" id=\"Bookform\">\n    <div class=\"container d-flex w-100 h-100 p-3 mx-auto flex-column\">\n      <main role=\"main\" class=\"inner\">\n        <section class=\"text-center\">\n          <div class=\"container\">\n            <h1 class=\"jumbotron-heading\">Book form</h1>\n            <p class=\"lead text-muted\">Fill out the form sell the book!</p>\n          </div>\n        </section>\n\n        <div class=\"container\">\n          <div class=\"row\">\n            <div class=\"col-md-8 order-md-1 box-center\">\n              <h4 class=\"mb-3\"></h4>\n              <div class=\"row\">\n                <div class=\"col-md-9 mb-3\">\n                  <!--                                    <input type=\"text\" v-model=\"user_id\" name=\"user_id\"/> <br/>-->\n                  <label for=\"book-title\">Book title</label>\n                  <input type=\"text\" v-model=\"book_title\" name=\"book_title\" class=\"form-control\" id=\"firstName\" placeholder=\"\" value=\"\" required>\n                  <div class=\"invalid-feedback\">\n                    Valid first name is required.\n                  </div>\n                </div>\n\n                <div class=\"col-md-3 mb-3\">\n                  <label for=\"isbn\">ISBN</label>\n                  <input type=\"number\" v-model=\"book_isbn\" name=\"book_isbn\" class=\"form-control\" id=\"lastName\" placeholder=\"\" min=\"1\" max=\"13\" required>\n                  <div class=\"invalid-feedback\">\n                    Valid last name is required.\n                  </div>\n                </div>\n\n              </div>\n              <div class=\" mb-3\">\n                <label for=\"book_course\">Book Course</label>\n                <input type=\"text\" v-model=\"book_course\" name=\"book_course\" class=\"form-control\" id=\"bookcourse\" placeholder=\"\" value=\"\" required>\n                <div class=\"invalid-feedback\">\n                  Valid book course is required.\n                </div>\n              </div>\n\n              <div class=\"mb-3\">\n\n                <label for=\"book_img\">Image URL <span class=\"text-muted\">(Optional)</span></label><br />\n                <input type=\"file\" @change=\"onFileChange\"accept=\"image/*\" class=\"\" placeholder=\"image....\">\n                <img :src= \"book_img\">\n              </div>\n\n              <div class=\"row\">\n                <div class=\"col-md-5 mb-3\">\n                  <label for=\"condition\">Condition of book</label>\n                  <select v-model=\"book_condition\" name=\"book_condition\" class=\"custom-select d-block w-100\" id=\"country\" placeholder=\"Choose a condition\" required>\n                    <option value=\"\" disabled selected>Select your option</option>\n                    <option>1</option>\n                    <option>2</option>\n                    <option>3</option>\n                    <option>4</option>\n                  </select>\n\n                  <div class=\"invalid-feedback\">\n                    Please select a condition of the book.\n                  </div>\n                </div>\n\n                <div class=\"col-md-6 mb-3\">\n                  <label for=\"date\">Preffered meeting date</label>\n                  <input type=\"date\" v-model=\"book_mdate\" name=\"book_mdate\" class=\"form-control\" placeholder=\"YYYY-MM-DD\" required>\n                  <div class=\"invalid-feedback\">\n                    preferred date required.\n                  </div>\n                </div>\n\n              </div>\n\n              <div class=\"mb-3\">\n                <label for=\"desc\">Description</label>\n                <!--            <input type=\"date\" class=\"form-control\" id=\"zip\" placeholder=\"\" required>-->\n                <textarea v-model=\"book_desc\" name=\"book_desc\"></textarea>\n                <div class=\"invalid-feedback\">\n                  Description required.\n                </div>\n              </div>\n\n              <div class=\"row\">\n                <div class=\"col-md-3 mb-3\">\n                  <label for=\"price\">Price</label>\n\n                  <input v-model=\"book_price\" name=\"book_price\" class=\"form-control\" type=\"number\" required min=\"0\" value=\"0\" step=\"any\">\n\n                  <div class=\"invalid-feedback\">\n                    Price required.\n                  </div>\n\n                </div>\n\n              </div>\n\n\n              <hr class=\"mb-4\">\n              <button @click=\"Bookform\" class=\"btn btn-primary btn-lg btn-block\" type=\"submit\">Save</button>\n\n            </div>\n          </div>\n        </div>\n      </main>\n    </div>\n  </div>\n</template>\n\n<style>\n  @import \"https://stackpath.bootstrapcdn.com/bootstrap/4.2.1/css/bootstrap.min.css\";\n  @import \"../components/style.css\";\n\n</style>\n\n<script>\n  import S3 from 'aws-s3';\n\n  const config = {\n\n    dirName: \"\",\n    region: \"ca-central-1\",\n    bucketName: \"mytbook\",\n    accessKeyId: \"AKIAJEXMSFSZFOLEF7UQ\",\n    secretAccessKey: \"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\",\n  };\n  const S3Client = new S3(config);\n  export default {\n    name: \"Bookform\",\n    data() {\n      return {\n        user_id: this.store.user_id,\n        book_title: \"\",\n        book_isbn: \"\",\n        book_course: \"\",\n        book_price: \"\",\n        book_condition: \"\",\n        book_desc: \"\",\n        book_img: \"\",\n        book_mdate: \"\",\n        book_status: \"\"\n      }\n    },\n    methods: {\n\n      Bookform: async function() {\n        //        alert(this.user_id );  \n  \n        S3Client\n          .uploadFile({\n          Key:this.book_img.name,\n          Body:this.book_img,\n          ACL:\"public-read\"\n        })\n          .then(data => console.log(data))\n          .catch(err => console.error(err));\n\n\n        var fd = new FormData();\n        //        fd.append(\"book_id\", this.book_id);\n        fd.append(\"user_id\", this.user_id);\n        fd.append(\"book_title\", this.book_title);\n        fd.append(\"book_isbn\", this.book_isbn);\n        fd.append(\"book_course\", this.book_course);\n        fd.append(\"book_price\", this.book_price);\n        fd.append(\"book_condition\", this.book_condition);\n        fd.append(\"book_desc\", this.book_desc);\n        fd.append(\"book_img\", this.book_img);\n        fd.append(\"book_mdate\", this.book_mdate);\n        fd.append(\"book_status\", this.book_status);\n        var resp = await fetch(\"https://mytbook.herokuapp.com/insert_book.php\", {\n          method: \"POST\",\n          body: fd\n        });\n\n        var json = await resp.text();\n        console.log(json);\n\n\n        //        this.$router.push('booklist');\n      },\n      onFileChange(e) {\n        var files =\n          e.target.files ||\n          e.dataTransfer.files;\n        if (!files.length)\n          return;\n        this.book_img = files[0];\n        this.createImage(files[0]);\n        console.log(files)\n      },\n      createImage(file) {\n        var book_img = new Image();\n        var reader = new FileReader();\n        var vm = this;\n\n        reader.onload = (e) => {\n          vm.book_img = e.target.result;\n        };\n        reader.readAsDataURL(file);\n      },\n \n    }\n  }\n\n</script>\n"]}]}